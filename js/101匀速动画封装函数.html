<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Create rules</title>
	<style>
		#container{
			width:300px;
			margin:100px auto;
			background:yellow;
		}
		#box1{
			width:100px;
			height:100px;
			background:red;
		}
		#box2{
			width:100px;
			height:100px;
			background:red;
			margin-top:20px;
			margin-bottom:20px;
		}
		#box3{
			width:100px;
			height:100px;
			background:red;
			opacity:0.2;
		}
	</style>
</head>
<body>
	<div id="container">
		<div id="box1"></div>
		<div id="box2"></div>
		<div id="box3"></div>
	</div>
</body>
<script>
	function anmiation(obj,attr,iTarget){
			clearInterval(obj.timer)
			obj.timer=setInterval(function(){
				var currentVal=parseFloat(getComputedStyle(obj,false)[attr]);
				if (attr=="opacity") {
					currentVal=Math.round(currentVal*100);
				}				
				if(currentVal<iTarget){
					iSpeed=15;
				}else{
					iSpeed=-15;
				}
				if (Math.abs(iTarget-currentVal)<Math.abs(iSpeed)) {
					if (attr=="opacity") {
						obj.style[attr]=1;
					}else{
						obj.style[attr]=iTarget;
					}
					clearInterval(obj.timer);
					// console.log(currentVal)
				}else{
					if (attr=="opacity") {
						obj.style[attr]=(currentVal+iSpeed)/100;
					}else{
						obj.style[attr]=currentVal+iSpeed+"px";
					}			
				}
			},30)
		}
		



	var oBox1=document.getElementById('box1');
	var oBox2=document.getElementById('box2');
	var oBox3=document.getElementById('box3');
	var timer=0;


	oBox1.onmouseout=function(){
		anmiation(oBox1,"width",100)
	}
	oBox1.onmouseover=function() {
		anmiation(oBox1,"width",500)
		// clearInterval(oBox1.timer);
		// var iSpeed=0;
		// oBox1.timer=setInterval(function(){
		// 	if (oBox1.offsetWidth<500) {
		// 		iSpeed=7;
		// 	}else {
		// 		iSpeed=-7;
		// 	}
		// 	if (Math.abs(500-oBox1.offsetWidth)<Math.abs(iSpeed)) {
		// 		oBox1.style.width=500+"px";
		// 		clearInterval(oBox1.timer)
		// 	} else {
		// 		oBox1.style.width=oBox1.offsetWidth+iSpeed+"px"
		// 	}
		// },30)
	}
	oBox2.onmouseout=function(){
		anmiation(oBox2,"height",0)
	}
	oBox2.onmouseover=function() {
		anmiation(oBox2,"height",500)
		// clearInterval(oBox2.timer);
		// var iSpeed=0;
		// oBox2.timer=setInterval(function(){
		// 	if (oBox2.offsetHeight<500) {
		// 		iSpeed=7;
		// 	}else {
		// 		iSpeed=-7;
		// 	}
		// 	if (Math.abs(500-oBox2.offsetHeight)<Math.abs(iSpeed)) {
		// 		oBox2.style.height=500+"px";
		// 		clearInterval(oBox2.timer)
		// 	} else {
		// 		oBox2.style.height=oBox2.offsetHeight+iSpeed+"px"
		// 	}
		// },30)
	}
	oBox3.onmouseover=function(){
		anmiation(oBox3,'opacity',100)
		// clearInterval(oBox3.timer)
		// oBox3.timer=setInterval(function(){
		// 	var currentVal=parseFloat(getComputedStyle(oBox3,false)["opacity"]);
		// 	currentVal=Math.round(currentVal*100);
		// 	if(currentVal<100){
		// 		iSpeed=3;
		// 	}else{
		// 		iSpeed=-3;
		// 	}
		// 	if (Math.abs(100-currentVal)<Math.abs(iSpeed)) {
		// 		oBox3.style.opacity=1;
		// 		clearInterval(oBox3.timer);
		// 		// console.log(currentVal)
		// 	}else{
		// 		oBox3.style.opacity=(currentVal+iSpeed)/100;			
		// 	}
		// },30)
	}
	oBox3.onmouseout=function(){
		anmiation(oBox3,'opacity',0)
	}
</script>
</html>